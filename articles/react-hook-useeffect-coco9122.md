---
title: "React Hooksã®å‚™å¿˜éŒ² ï½useEffect()ï½"
emoji: "ğŸ˜º"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['react', 'javascript']
published: true
---

# Reactã®React Hooks
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã§å­¦ç¿’ã—ãŸã‚‚ã®ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«React Hooksã®å‚™å¿˜éŒ²ã¨ã—ã¦æŠ•ç¨¿ã€‚

- [useState()](https://zenn.dev/coco9122/articles/react-hook-usestate-coco9122)

https://zenn.dev/coco9122/articles/react-hook-usestate-coco9122

- useEffect()

:::message
æœ¬è¨˜äº‹ã¯useEffectã«ã¤ã„ã¦ã®å†…å®¹ã«ãªã‚Šã¾ã™ã€‚
:::

# useEffect()ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹

Reactã®å…¬å¼ã®Hookã®API Refereneceã‚ˆã‚Š

>å‰¯ä½œç”¨ã‚’æœ‰ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å‘½ä»¤å‹ã®ã‚³ãƒ¼ãƒ‰ã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚
>Accepts a function that contains imperative, possibly effectful code.

>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‰¯ä½œç”¨é–¢æ•°ã¯ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒçµ‚äº†ã—ãŸå¾Œã«æ¯å›å‹•ä½œã—ã¾ã™ãŒã€ç‰¹å®šã®å€¤ãŒå¤‰åŒ–ã—ãŸæ™‚ã®ã¿å‹•ä½œã•ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
>By default, effects run after every completed render, but you can choose to fire them only when certain values have changed.

>ã‚‚ã—ã‚‚å‰¯ä½œç”¨ã¨ãã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’ 1 åº¦ã ã‘ï¼ˆãƒã‚¦ãƒ³ãƒˆæ™‚ã¨ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ã®ã¿ï¼‰å®Ÿè¡Œã—ãŸã„ã¨ã„ã†å ´åˆã€ç©ºã®é…åˆ— ([]) ã‚’ç¬¬ 2 å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
>If you want to run an effect and clean it up only once (on mount and unmount), you can pass an empty array ([]) as a second argument.

ã¨ã®ã“ã¨ã€‚ã“ã“ã§ã„ã†å‰¯ä½œç”¨ã¯DOMã®å¤‰æ›´ã‚„ã€APIã®é€šä¿¡ç­‰ãŒã‚ã’ã‚‰ã‚Œã¾ã™ã€‚

åˆå›ãƒ¬ãƒ³ãƒ€ãƒ¼æ™‚ãŠã‚ˆã³ã€ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã€ç‰¹å®šã®å‡¦ç†ï¼ˆå€¤ã®å¤‰åŒ–ï¼‰ã‚’è¡Œã£ãŸå ´åˆã«ã€å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã•ã›ã‚‹Hookã€‚

```jsx
import { useEffect } from 'react' 
```
ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚
```jsx
useEffect(() => {/* */ return () => {}}, [])
```

`{/* */ return () => {}}`ãŒå‰¯ä½œç”¨é–¢æ•°ã€ãã®ã†ã¡`return () => {}`ã¯ã‚¢ãƒã‚¦ãƒ³ãƒˆæ™‚ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚`[]`ãŒç‰¹å®šã®å€¤ãŒå¤‰åŒ–ã—ãŸæ™‚ã®ã¿å‹•ä½œã•ã›ã‚‹ãŸã‚ã®ç‰¹å®šã®å€¤ã‚’é…åˆ—ã«ã—ãŸç‰©ã«ãªã‚Šã¾ã™ã€‚

ã—ãŸãŒã£ã¦ã€ã“ã®å ´åˆã ã¨ç©ºé…åˆ—ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€åˆå›ãƒ¬ãƒ³ãƒ€ãƒ¼æ™‚ãŠã‚ˆã³ã€ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ã—ã‹å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

å®Ÿéš›ã«è¡Œã£ã¦ã¿ã¾ã™ã€‚ä»Šå›ã¯`useState`ã§å®šç¾©ã—ãŸ`count`ã«å¤‰æ›´ãŒã‚ã‚‹ã¨`useEffect`ãŒã‚ˆã°ã‚Œã€`count(Effect)`ãŒåŠ ç®—ã•ã‚Œã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚

```jsx
useEffect(() => {
    setCountEffect((currentCount) => currentCount+1)
  },[count])
```

`count`ãŠã‚ˆã³`countEffect`ã®åˆæœŸå€¤ã¯åŒã˜ã‚¼ãƒ­ã§ã™ãŒã€`useEffect`ã¯åˆå›ãƒ¬ãƒ³ãƒ€ãƒ¼æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§`countEffect`ã¯1ã«ãªã£ã¦ã„ã¾ã™ã€‚
Addã‚„RESETã‚’æŠ¼ã™ã¨`count`ãŒåŠ ç®—ã¾ãŸãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã“ã¨ã§ã€`count`ãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚ãã®å¤‰æ›´ã‚’èª­ã¿å–ã£ã¦`useEffect`ãŒå®Ÿè¡Œã•ã‚Œã€ã€`count(Effect)`ãŒåŠ ç®—ã•ã‚Œã‚‹ã¨ã„ã†æµã‚Œã«ãªã‚Šã¾ã™ã€‚

@[codepen](https://codepen.io/coco9122/pen/KKQBoLL?default-tab=js,result)

æ™‚é–“ãŒã‚ã‚Œã°ã‚¢ãƒã‚¦ãƒ³ãƒˆæ™‚ã®ã‚‚ã‹ã“ã†ã‹ãªã¨

# ã¾ã¨ã‚

`useEffect`ã®è¦ä»¶ã‚’ã¾ã¨ã‚ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
- å‰¯ä½œç”¨é–¢æ•°ã‚’åˆå›ãƒ¬ãƒ³ãƒ€ãƒ¼æ™‚ã€ã‚¢ãƒã‚¦ãƒ³ãƒˆæ™‚ã€ç‰¹å®šã®å€¤ãŒå¤‰æ›´ã•ã‚ŒãŸéš›ã«å®Ÿè¡Œã™ã‚‹
- ç¬¬äºŒå¼•æ•°ã«ç‰¹å®šã®å€¤ã‚’è¨­å®š
- ã‚¢ãƒã‚¦ãƒ³ãƒˆæ™‚ã«å®Ÿè¡Œã—ãŸã„ã‚‚ã®å‰¯ä½œç”¨é–¢æ•°å†…ã«`return () => {}`ã‚’è¨˜è¿°
- `useEffect()`ã®å¼•æ•°ã§åˆæœŸå€¤ã‚’è¨­å®šå¯èƒ½

# å‚è€ƒæ–‡çŒ®
- React Hookså…¥é–€ã€€è‘—è€…ã€Œsoarflatã€[Link](https://www.amazon.co.jp/React-Hooks-%E5%85%A5%E9%96%80-%E3%83%95%E3%83%83%E3%82%AF%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%82%84%E4%BD%BF%E3%81%84%E6%89%80%E3%82%92%E3%81%97%E3%81%A3%E3%81%8B%E3%82%8A%E7%90%86%E8%A7%A3%E3%81%97%E3%81%A6%E4%BD%BF%E3%81%84%E3%81%93%E3%81%AA%E3%81%99-soarflat-ebook/dp/B08JTXQ2M6)
- Reactå…¬å¼ã‚µã‚¤ãƒˆ [Link](https://ja.reactjs.org/docs/hooks-reference.html)

